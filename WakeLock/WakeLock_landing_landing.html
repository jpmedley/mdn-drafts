<div>{{draft}}{{securecontext_header}}{{DefaultAPISidebar("Screen Wake Lock API")}}</div>

<!-- waiting for an api name from kuma -->

<p class="summary">The Screen Wake Lock API provides a way to prevent devices from dimming or locking the screen when an application needs to keep running.</p>

<h2>Concepts and Usage</h2>

<p>Most devices by default incorporated turning off the screen after a specified amount of time to prolong the life of the hardware, modern devices do this to save on battery power. Whilst this is a useful feature, some applications need the screen to stay awake to be their most useful.</p>

<p>The Screen Wake Lock API prevents the screen from turning off, dimming or locking. It allows for a simple platform based solution which up until now could only be achieved via workarounds which were potentially power hungry. Only visible (active) documents can acquire the screen wake lock.</p>

<p>There are plenty of use cases for keeping a screen on, including reading an ebook, following a recipe, presenting to an audience, scanning a qr/barcode or applications that use voice or gesture control, rather than tactile input (the default way to keep a screen awake).</p>

<p>You acquire a {{domxref('WakeLockSentinel')}} object by calling the {{domxref('WakeLock.request','navigator.wakeLock.request()')}} {{domxref('Promise')}} based method that resolves if the platform allows it. A request may be rejected for a number of reasons, including system settings (such as power save mode or low battery level) or the document not being active or visible.</p>

<p>The sentinel is attached to the underlying system wake lock and can be released either by the system, again if the battery power is too low or the document becomes not visible or inactive. It can also be released manually via the release() method. It is good practice to store a reference to the sentinel object to control release later and also to reacquire the system wake lock if need be.</p>

<p>The Screen Wake Lock API should be used to keep the screen on to benefit usability. It's a good idea to show some feedback on the interface to show if wake lock is active and a way for the user to disable it if they wish.
</p>

<h2 id="Interfaces">Screen Wake Lock API Interfaces</h2>

<dl>
  <dt>{{domxref("WakeLock")}}</dt>
  <dd>The main class of this API â€” contains functionality to request a wake lock.</dd>

  <dt>{{domxref("WakeLockSentinel")}}</dt>
  <dd>The object that is returned by a successful call to the {{domxref('WakeLock.request')}} method of the {{domxref('Wake Lock API')}}. It provides a handle to the underlying platform wake lock and if referenced can be manually released and reacquired.</dd>

  <dt>{{domxref("Navigator.wakelock")}}</dt>
  <dd>The entry point into the API. Returns a {{domxref("WakeLock")}} object instance, from which all other functionality can be accessed.</dd>
</dl>

<h2 id="Examples">Examples</h2>

<h3>Testing for support</h3>

<p>This code checks for wake lock support and updates the UI accordingly.</p>


<pre class="brush: js">
if ('wakeLock' in navigator) {
  isSupported = true;
  statusElem.textContent = 'Screen Wake Lock API supported ðŸŽ‰';
} else {
  wakeButton.disabled = true;
  statusElem.textContent = 'Wake lock is not supported by this browser.';
}
</pre>


<h3>Requesting a wake lock</h3>

<p>The following example demonstrates how to request a {{domxref('WakeLockSentinel')}} object. The {{domxref('WakeLock.request')}} method is {{jsxref('Promise')}} based and so we can create an asynchronous function, which in turn updates the UI to reflect the wake lock is active.</p>

<pre class="brush: js">
// create a reference for the wake lock
let wakeLock = null;
  
// create an async function to request a wake lock
const requestWakeLock = async () => {
  try {
    wakeLock = await navigator.wakeLock.request('screen');

    // change up our interface to reflect wake lock active
    statusElem.textContent = 'Wake Lock is active!';

  } catch (err) {

    // if wake lock request fails - usually system related, such as battery
    statusElem.textContent = `${err.name}, ${err.message}`;

  }
}</pre>

<h3>Releasing wake lock</h3>

<p>The following example shows how to release the previously acquired wake lock.</p>

<pre class="brush: js">
wakeLock.release()
  .then(() => {
    wakeLock = null;
  });</pre>


<h3>Listening for wake lock release</h3>

<p>This example updates the UI if the wake lock has been released for any reason (such as navigating away from the active window/tab).</p>

<pre class="brush: js">
wakeLock.addEventListener('release', () => {

  // the wake lock has been released
  statusElem.textContent = 'Wake Lock has been released';

});</pre>

<h3>Reacquiring a wake lock</h3>

<p>The following code reacquires the wake lock should the visibility of the document change and the wake lock is released.</p>

<pre class="brush: js">
document.addEventListener('visibilitychange', () => {
  if (wakeLock !== null && document.visibilityState === 'visible') {
    wakeLock = await navigator.wakeLock.request('screen');
  }
});</pre>

<h3>Putting it all together</h3>

<p>The demo here uses a button to acquire a wake lock and also release it, which in turn updates the UI. The UI also updates if the wake lock is released automatically for any reason. There's a checkbox which when checked, will automatically reacquire the wake lock if the documents visibility state changes and becomes visible again.</p>

<!-- TODO add to gh to embed here -->


<h2 id="Specifications">Specifications</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <th scope="col">Specification</th>
   <th scope="col">Status</th>
   <th scope="col">Comment</th>
  </tr>
  <tr>
   <td>{{SpecName('Screen Wake Lock API', '#wakelock', 'WakeLock')}}</td>
   <td>{{Spec2('Screen Wake Lock API')}}</td>
   <td>Initial definition.</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility">Browser compatibility</h2>

<div class="hidden">The compatibility table in this page is generated from structured data. If you'd like to contribute to the data, please check out <a href="https://github.com/mdn/browser-compat-data">https://github.com/mdn/browser-compat-data</a> and send us a pull request.</div>

<p>{{Compat("api.WakeLock")}}</p>

<h2>See also:</h2>

<ul>
  <li><a href="https://web.dev/wakelock/">An introductory article on the Screen Wake Lock API</a></li>
  <li><a href="https://wake-lock-demo.glitch.me/">A Screen Wake Lock API demo on glitch</a></li>
</ul>
